{"version":3,"file":"Upload.stories-7367903e.js","sources":["../../../../packages/antwerp-ui/react-components/src/utils/file.utils.ts","../../../../packages/antwerp-ui/react-components/src/lib/molecules/upload/UploadFile.tsx","../../../../packages/antwerp-ui/react-components/src/lib/molecules/upload/Upload.tsx"],"sourcesContent":["const MB = 1048576;\n\nexport function hasValidFormat(file: File, acceptedFormat?: string): boolean {\n  return (\n    !acceptedFormat ||\n    acceptedFormat === '*' ||\n    acceptedFormat === file.type ||\n    (acceptedFormat?.includes('*') &&\n      !!acceptedFormat?.split('/')?.[0] &&\n      file.type.startsWith(acceptedFormat?.split('/')?.[0]))\n  );\n}\n\nexport function hasValidSize(file: File, maxSize?: number): boolean {\n  return !maxSize || file.size <= maxSize * MB;\n}\n\nexport function areFilesValid(\n  files: File[],\n  acceptedFormat?: string,\n  maxSize?: number\n): { validSize: boolean; validFormat: boolean }[] {\n  return files.map((f) => ({ validFormat: hasValidFormat(f, acceptedFormat), validSize: hasValidSize(f, maxSize) }));\n}\n","import { hasValidFormat, hasValidSize } from '../../../utils/file.utils';\nimport { Button } from '../../atoms/button';\nimport { Icon } from '../../base/icon';\nimport { UploadFileProps } from './Upload.types';\n\nexport function UploadFile({\n  file,\n  acceptedFormat,\n  maxSize,\n  onDelete,\n  formatErrorLabel,\n  deleteAriaLabel,\n  sizeErrorLabel\n}: UploadFileProps) {\n  const isValidFormat = hasValidFormat(file, acceptedFormat);\n  const isValidSize = hasValidSize(file, maxSize);\n  return (\n    <li key={file.name}>\n      <Icon name={isValidFormat && isValidSize ? 'common-file-empty' : 'alert-triangle'} />\n      <span className=\"m-upload__filename\">{file.name}</span>\n      {!isValidFormat && <span className=\"m-upload__error\">{formatErrorLabel}</span>}\n      {!isValidSize && <span className=\"m-upload__error\">{sizeErrorLabel}</span>}\n      {onDelete && (\n        <div className=\"m-upload__delete\">\n          <Button\n            ariaLabel={deleteAriaLabel}\n            addOn={{ type: 'icon', iconProps: { name: 'remove' } }}\n            emphasis=\"low\"\n            theme=\"danger\"\n            size=\"small\"\n            onClick={() => onDelete(file)}\n          />\n        </div>\n      )}\n    </li>\n  );\n}\n\nexport default UploadFile;\n","import React, { ChangeEvent } from 'react';\nimport { classNames } from '../../../utils/dom.utils';\nimport { areFilesValid } from '../../../utils/file.utils';\nimport { UploadProps } from './Upload.types';\nimport { UploadFile } from './UploadFile';\n\nexport function Upload({\n  acceptedFormat,\n  deleteAriaLabel,\n  disabled,\n  files,\n  formatErrorLabel,\n  id,\n  label,\n  maxSize,\n  maxSizeLabel,\n  multiple,\n  onChange,\n  onDelete,\n  sizeErrorLabel,\n  qa\n}: UploadProps) {\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  const handleDelete = (file: File) => {\n    onDelete && onDelete(files?.filter((f) => f?.name !== file.name));\n    if (inputRef.current) {\n      inputRef.current.value = '';\n    }\n  };\n\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n    if (multiple) {\n      const newFiles = e.target?.files\n        ? [...files, ...Array.from(e.target.files)].filter(\n            (file, index, self) => self.findIndex((f) => f.name === file.name) === index\n          )\n        : [];\n      onChange && onChange(newFiles, areFilesValid(newFiles, acceptedFormat, maxSize));\n    } else {\n      const newFile = e.target?.files?.[0] ? [e.target?.files?.[0]] : [];\n      onChange && onChange(newFile, areFilesValid(newFile, acceptedFormat, maxSize));\n    }\n  };\n\n  return (\n    <div className={classNames({ 'm-upload': true, 'is-disabled': !!disabled })} data-qa={qa}>\n      <div className=\"m-upload__inner\">\n        <div className=\"m-upload__dropzone\">\n          <input\n            ref={inputRef}\n            id={id}\n            type=\"file\"\n            multiple={multiple}\n            onChange={handleChange}\n            accept={acceptedFormat}\n            className=\"m-upload__input\"\n            disabled={disabled}\n          />\n          <div className=\"m-upload__content\">\n            <label htmlFor={id} className=\"m-upload__message u-margin-bottom\">\n              {label}\n            </label>\n          </div>\n        </div>\n      </div>\n      {maxSize && (\n        <small className=\"m-upload__description\">\n          {maxSizeLabel} {maxSize}MB\n        </small>\n      )}\n      <ul className=\"m-upload__files\">\n        {files?.map((f) => (\n          <UploadFile\n            file={f}\n            deleteAriaLabel={deleteAriaLabel}\n            formatErrorLabel={formatErrorLabel}\n            sizeErrorLabel={sizeErrorLabel}\n            key={f?.name}\n            onDelete={onDelete && handleDelete}\n            maxSize={maxSize}\n            acceptedFormat={acceptedFormat}\n          />\n        ))}\n      </ul>\n    </div>\n  );\n}\n\nUpload.defaultProps = {\n  label: 'Sleep een bestand hier of klik om te bladeren',\n  maxSize: 10,\n  multiple: true,\n  disabled: false,\n  acceptedFormat: '*',\n  files: [],\n  maxSizeLabel: 'Maximale bestandsgrootte:',\n  formatErrorLabel: 'Dit bestandsformaat is niet toegestaan.',\n  sizeErrorLabel: 'Maximale bestandsgrootte overschreden.',\n  deleteAriaLabel: 'Verwijder bestand'\n};\n\nexport default Upload;\n"],"names":["MB","hasValidFormat","file","acceptedFormat","_a","_b","__name","hasValidSize","maxSize","areFilesValid","files","f","UploadFile","onDelete","formatErrorLabel","deleteAriaLabel","sizeErrorLabel","isValidFormat","isValidSize","_jsx","Icon","name","Button","type","iconProps","Upload","disabled","id","label","maxSizeLabel","multiple","onChange","qa","inputRef","React","useRef","handleDelete","filter","current","value","handleChange","e","newFiles","target","Array","from","index","self","findIndex","newFile","classNames","_jsxs","map","defaultProps"],"mappings":"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"}